<div class="filters-sidebar">
  <!-- Header -->
  <div class="sidebar-header">
    <h3>Filters</h3>
    @if (hasActiveFilters()) {
      <button mat-button (click)="clearAllFilters()" class="clear-btn">
        Clear All
      </button>
    }
  </div>

  <!-- Search -->
  <div class="filter-group">
    <label class="filter-label">Search</label>
    <mat-form-field appearance="outline" class="filter-input">
      <input 
        matInput 
        placeholder="Search fields..."
        [value]="searchText()"
        (input)="updateSearchFilter($any($event.target).value)"
      />
      @if (searchText()) {
        <button matSuffix mat-icon-button (click)="updateSearchFilter('')">
          <mat-icon>close</mat-icon>
        </button>
      }
    </mat-form-field>
  </div>

  <!-- Category -->
  <div class="filter-group">
    <label class="filter-label">Category</label>
    <mat-form-field appearance="outline" class="filter-input">
      <mat-select 
        [value]="selectedCategory()"
        (valueChange)="updateCategoryFilter($event)"
        placeholder="All Categories"
        [disabled]="isLoadingCategories()"
      >
        <mat-option [value]="null">All Categories</mat-option>
        @for (category of categories(); track category.id) {
          <mat-option [value]="category.name">{{ category.name }}</mat-option>
        }
      </mat-select>
      @if (isLoadingCategories()) {
        <mat-spinner matSuffix diameter="20"></mat-spinner>
      }
    </mat-form-field>
  </div>

  <!-- City -->
  <div class="filter-group">
    <label class="filter-label">City</label>
    <mat-form-field appearance="outline" class="filter-input">
      <mat-select 
        [value]="selectedCity()"
        (valueChange)="updateCityFilter($event)"
        placeholder="All Cities"
        [disabled]="isLoadingCities()"
      >
        <mat-option [value]="null">All Cities</mat-option>
        @for (city of cities(); track city.id) {
          <mat-option [value]="city.name">{{ city.name }}</mat-option>
        }
      </mat-select>
      @if (isLoadingCities()) {
        <mat-spinner matSuffix diameter="20"></mat-spinner>
      }
    </mat-form-field>
  </div>

  <!-- Size -->
  <div class="filter-group">
    <label class="filter-label">Field Size</label>
    <mat-form-field appearance="outline" class="filter-input">
      <mat-select 
        [value]="selectedSize()"
        (valueChange)="updateSizeFilter($event)"
        placeholder="All Sizes"
      >
        <mat-option [value]="null">All Sizes</mat-option>
        @for (size of sizes(); track size.value) {
          <mat-option [value]="size.value">{{ size.label }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Price Range -->
  <div class="filter-group">
    <label class="filter-label">Price Range</label>
    
    <div class="price-display">
      {{ minPriceValue() }} - {{ maxPriceValue() }} EGP
    </div>

    <div class="price-inputs">
      <mat-form-field appearance="outline" class="price-field">
        <mat-label>Min</mat-label>
        <input 
          matInput 
          type="number"
          min="0"
          max="1000"
          [value]="minPriceValue()"
          (input)="updateMinPriceFilter($any($event.target).valueAsNumber)"
        />
      </mat-form-field>

      <span class="price-separator">-</span>

      <mat-form-field appearance="outline" class="price-field">
        <mat-label>Max</mat-label>
        <input 
          matInput 
          type="number"
          min="0"
          max="1000"
          [value]="maxPriceValue()"
          (input)="updateMaxPriceFilter($any($event.target).valueAsNumber)"
        />
      </mat-form-field>
    </div>
  </div>
</div>



