<div class="container py-5">
  <h1 class="display-5 fw-bold text-dark mb-4">
    @if (field(); as fieldData) {
    {{ fieldData.name }}
    } @else { Loading Field Details... }
  </h1>

  <div class="row g-4 mb-5 custom-details-row">
    <div class="col-md-8">
      @if (field(); as fieldData) {
      <div class="card shadow-sm border-0 custom-image-container">
        @if (fieldData.fieldImages.length > 0) {
        <img
          [src]="fieldData.fieldImages[0].imageUrl"
          [alt]="'Image of ' + fieldData.name"
          class="card-img-top custom-field-image"
        />
        } @else {
        <div class="bg-light d-flex align-items-center justify-content-center custom-field-image">
          <span class="text-muted">No Image Available</span>
        </div>
        }
      </div>
      }
    </div>

    <div class="col-md-4 d-flex flex-column gap-4">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-primary text-white fs-5 fw-semibold">
          @if (field(); as fieldData) {
          {{ fieldData.categoryName }} Pitches } @else { Details }
        </div>
        <div class="card-body">
          @if (field(); as fieldData) {
          <ul class="list-unstyled mb-0">
            <li><strong class="text-primary">Size:</strong> {{ fieldData.size }}</li>
            <li><strong class="text-primary">Open At:</strong> {{ fieldData.openAt }}:00</li>
            <li><strong class="text-primary">Close At:</strong> {{ fieldData.closeAt }}:00</li>
            <li>
              <strong class="text-primary">Price/Hour:</strong>
              {{ fieldData.pricePerHour | currency : 'EGP' : 'symbol' : '1.0-2' }}
            </li>
          </ul>
          }
        </div>
      </div>

      <div class="card shadow-sm h-100">
        <div class="card-header bg-primary text-white fs-5 fw-semibold">Address</div>
        <div class="card-body d-flex flex-column justify-content-between">
          @if (field(); as fieldData) {
          <p class="card-text">{{ fieldData.location }}, {{ fieldData.cityName }}</p>

          <a
            (click)="scrollToMap(); $event.preventDefault()"
            href="#google-map"
            class="btn btn-outline-primary mt-3 align-self-start"
          >
            View on Map
          </a>
          }
        </div>
      </div>
    </div>
  </div>

  <section  class="time-slot-section">
    @if(field(); as currentField) {
    <app-time-slot [fieldSignal]="currentField"></app-time-slot>
  }
  </section>
  <div class="row justify-content-start mb-4">
    <div class="col-md-8">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-light fs-5 fw-semibold">Description</div>
        <div class="card-body">
          <p class="text-muted fst-italic mb-0">
            A modern and well-maintained football field located in the heart of
            {{ field()?.cityName || 'the city' }}. Ideal for evening games with friends or league
            matches.
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-start mb-5">
    <div class="col-md-8">
      <div id="google-map" class="shadow-lg border rounded overflow-hidden">
        @if (field(); as fieldData) {
        <iframe
          [src]="getSafeMapUrl(fieldData.location, fieldData.cityName)"
          width="100%"
          height="400"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
        }
      </div>
    </div>
  </div>
</div>
